<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Home</title>
    <link rel="stylesheet" th:href="@{/css/home.css}" />
    <script
      src="https://kit.fontawesome.com/70f63a8d9c.js"
      crossorigin="anonymous"
    ></script>
  </head>
  <body>
    <!-- <header th:insert="~{forum/fragments.html :: navbar}"></header> -->
    <header>
      <div th:fragment="navbar" class="navbar">
        <img
          class="logo"
          src="https://th.bing.com/th/id/OIP.Xz0EqBxG4a10yKT7ARbsGgHaEc?pid=ImgDet&rs=1"
          alt="dodge"
        />
        <nav class="wrapper">
          <ul>
            <li>
              <a th:href="@{/forum}">All Posts</a>
            </li>
            <li>
              <a href="#">Profile</a>
            </li>
            <li>
              <a th:href="@{/forum/post/form}">New Post</a>
            </li>
          </ul>
        </nav>
        <form id="search-form" action="#" th:action="@{/forum/search}">
          <input
            type="text"
            name="search"
            id="search"
            placeholder="Search Posts"
          />
          <button type="submit" class="btn-search">
            <i class="fa-solid fa-magnifying-glass"></i>
          </button>
        </form>
        <div class="user-details-wrapper">
          <div class="user-avatar">
            <span class="avatar-text">u</span>
          </div>
          <div class="user-details">
            <div th:if="${isLoggedIn}">
              <span class="name" th:text="${username}">user</span>
              <form action="#" th:action="@{/logout}" method="post">
                <button class="btn-auth" type="submit">logout</button>
              </form>
            </div>

            <div th:unless="${isLoggedIn}">
              <span class="name">anonymous</span>
              <form action="#" th:action="@{/login}" method="get">
                <button class="btn-auth" type="submit">login</button>
              </form>
            </div>
          </div>
        </div>
      </div>
    </header>
    <main>
      <section class="posts">
        <article class="post" th:each="post: ${posts}">
          <div class="post-header">
            <div class="author-details">
              <div class="avatar">
                <span class="avatar-text" th:text="${post.author.symbol}"
                  >J</span
                >
              </div>
              <div class="author-info">
                <p class="name" th:text="${post.author.name}">John Doe</p>
                <span class="createdAt">just now</span>
              </div>
            </div>
          </div>
          <div class="post-body">
            <div class="content-wrapper">
              <h2 class="post-title" th:text="${post.title}">
                Lorem ipsum dolor sit amet.
              </h2>
              <p class="post-content" th:text="${post.content}">
                Lorem ipsum dolor sit amet consectetur adipisicing elit.
                Quisquam voluptatum, voluptate, quibusdam, quia voluptas quod
                quos voluptatem quas doloribus quidem voluptatibus. Quisquam
                voluptatum, voluptate, quibusdam, quia voluptas quod quos
                voluptatem quas doloribus quidem voluptatibus.
              </p>
              <div class="tags-container">
                <span class="tags-title">tags</span>
                <span class="dot"></span>
                <div class="tags" th:each="tag: ${post.tags}">
                  <span class="tag" th:text="${tag.name}">test</span>
                </div>
              </div>
            </div>
            <div class="image-container">
              <img
                src="https://th.bing.com/th/id/OIP.Rx5CjQfaEXS4u57O8c5ajQHaFX?pid=ImgDet&rs=1"
                alt="test"
              />
            </div>
            <div class="stats">
              <div class="likes">
                <i class="fa-regular fa-heart"></i>
                <span class="likes-count" th:text="${post.likesCount}">10</span>
              </div>
              <div class="comments">
                <i class="fa-regular fa-comment"></i>
                <span class="comments-count" th:text="${post.commentsCount}"
                  >30</span
                >
              </div>
              <div class="post-options">
                <i class="fa-solid fa-ellipsis"></i>
              </div>
            </div>
          </div>
        </article>
      </section>
    </main>
    <script></script>
  </body>
</html>
